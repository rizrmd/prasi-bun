{
  "version": 3,
  "sources": ["../../../node_modules/react-dom/client.js", "../../web/src/render/site/site.tsx", "../../web/src/render/site/site-loader.tsx"],
  "sourcesContent": ["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n", "import { FC, useState } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { GlobalContext, defineReact, defineWindow } from \"web-utils\";\nimport { siteLoader } from \"./site-loader\";\n\nconst w = window as unknown as {\n  prasiContext: any;\n  rootRender: any;\n};\n\nw.prasiContext = {\n  global: {},\n  render() {},\n};\n\nconst Root: FC<{ url: URL; Live: any }> = ({ url, Live }) => {\n  const [_, render] = useState({});\n  w.prasiContext.render = () => {\n    render({});\n  };\n\n  const Provider = GlobalContext.Provider as FC<{ value: any; children: any }>;\n  return (\n    <Provider value={w.prasiContext}>\n      <Live\n        domain={url.host}\n        pathname={location.pathname}\n        loader={siteLoader}\n      />\n    </Provider>\n  );\n};\n\n(async () => {\n  const div = document.getElementById(\"root\");\n  if (div) {\n    const root = createRoot(div);\n    const url = new URL(location.href);\n    await defineWindow(false);\n    defineReact();\n    const { Live } = await import(\"../live/live\");\n    root.render(<Root url={url} Live={Live} />);\n    if (document.body.classList.contains(\"opacity-0\")) {\n      document.body.classList.remove(\"opacity-0\");\n    }\n  }\n})();\n", "import { w } from \"../../utils/script/init-api\";\nimport { Loader } from \"../live/logic/global\";\n\nconst base = `/_web/${(window as any).id_site}`;\n\nconst cache = { site: null as any, pages: [] as any, api: null };\n\nexport const siteLoader: Loader = {\n  async site(p, id) {\n    const res = (await load(`/site?prod=1`)) as {\n      site: any;\n      pages: any;\n      api: any;\n    };\n    cache.site = res.site;\n    cache.pages = res.pages;\n    cache.api = res.api;\n\n    w.serverurl = res.site.config.api_url;\n    w.apiurl = res.site.config.api_url;\n\n    w.prasiApi = {\n      [res.site.config.api_url]: { apiEntry: res.api },\n    };\n\n    return res.site;\n  },\n  async comp(p, id) {\n    const comp = (await load(`/comp/${id}`)) as any;\n    p.comps.all[id] = comp;\n    return comp;\n  },\n  npm(p, type, id) {\n    if (type === \"site\") return `/_web/${cache.site.id}/npm-site/site.js`;\n    return `/_web/${cache.site.id}/npm-page/${id}/page.js`;\n  },\n  async page(p, id) {\n    const page = cache.pages.find((x: any) => x.id === id);\n    if (page && !page.content_tree) {\n      const res = (await load(`/page/${id}`)) as any;\n      return res;\n    }\n    return null;\n  },\n  async pages(p, id) {\n    return cache.pages;\n  },\n};\n\nconst load = async (url: string) => {\n  const res = await fetch(`${base}${url}`);\n  const text = await res.text();\n  const json = JSON.parse(text);\n  return json;\n};\n"],
  "mappings": "gGAAA,IAAAA,EAAAC,EAAAC,GAAA,cAEA,IAAIC,EAAI,IAEND,EAAQ,WAAaC,EAAE,WACvBD,EAAQ,YAAcC,EAAE,YAEpB,IAAAC,ICPN,IAAAC,EAA6B,OAC7BC,EAA2B,OCE3B,IAAMC,EAAO,SAAU,OAAe,OAAO,GAEvCC,EAAQ,CAAE,KAAM,KAAa,MAAO,CAAC,EAAU,IAAK,IAAK,EAElDC,EAAqB,CAChC,MAAM,KAAKC,EAAGC,EAAI,CAChB,IAAMC,EAAO,MAAMC,EAAK,cAAc,EAKtC,OAAAL,EAAM,KAAOI,EAAI,KACjBJ,EAAM,MAAQI,EAAI,MAClBJ,EAAM,IAAMI,EAAI,IAEhBE,EAAE,UAAYF,EAAI,KAAK,OAAO,QAC9BE,EAAE,OAASF,EAAI,KAAK,OAAO,QAE3BE,EAAE,SAAW,CACX,CAACF,EAAI,KAAK,OAAO,OAAO,EAAG,CAAE,SAAUA,EAAI,GAAI,CACjD,EAEOA,EAAI,IACb,EACA,MAAM,KAAKF,EAAGC,EAAI,CAChB,IAAMI,EAAQ,MAAMF,EAAK,SAASF,CAAE,EAAE,EACtC,OAAAD,EAAE,MAAM,IAAIC,CAAE,EAAII,EACXA,CACT,EACA,IAAIL,EAAGM,EAAML,EAAI,CACf,OAAIK,IAAS,OAAe,SAASR,EAAM,KAAK,EAAE,oBAC3C,SAASA,EAAM,KAAK,EAAE,aAAaG,CAAE,UAC9C,EACA,MAAM,KAAKD,EAAGC,EAAI,CAChB,IAAMM,EAAOT,EAAM,MAAM,KAAMU,GAAWA,EAAE,KAAOP,CAAE,EACrD,OAAIM,GAAQ,CAACA,EAAK,aACH,MAAMJ,EAAK,SAASF,CAAE,EAAE,EAGhC,IACT,EACA,MAAM,MAAMD,EAAGC,EAAI,CACjB,OAAOH,EAAM,KACf,CACF,EAEMK,EAAO,MAAOM,GAAgB,CAElC,IAAMC,EAAO,MADD,MAAM,MAAM,GAAGb,CAAI,GAAGY,CAAG,EAAE,GAChB,KAAK,EAE5B,OADa,KAAK,MAAMC,CAAI,CAE9B,ED9BM,IAAAC,EAAA,OAnBAC,EAAI,OAKVA,EAAE,aAAe,CACf,OAAQ,CAAC,EACT,QAAS,CAAC,CACZ,EAEA,IAAMC,EAAoC,CAAC,CAAE,IAAAC,EAAK,KAAAC,CAAK,IAAM,CAC3D,GAAM,CAACC,EAAGC,CAAM,KAAI,YAAS,CAAC,CAAC,EAC/BL,EAAE,aAAa,OAAS,IAAM,CAC5BK,EAAO,CAAC,CAAC,CACX,EAEA,IAAMC,EAAWC,EAAc,SAC/B,SACE,OAACD,EAAA,CAAS,MAAON,EAAE,aACjB,mBAACG,EAAA,CACC,OAAQD,EAAI,KACZ,SAAU,SAAS,SACnB,OAAQM,EACV,EACF,CAEJ,GAEC,SAAY,CACX,IAAMC,EAAM,SAAS,eAAe,MAAM,EAC1C,GAAIA,EAAK,CACP,IAAMC,KAAO,cAAWD,CAAG,EACrBP,EAAM,IAAI,IAAI,SAAS,IAAI,EACjC,MAAMS,EAAa,EAAK,EACxBC,EAAY,EACZ,GAAM,CAAE,KAAAT,CAAK,EAAI,KAAM,QAAO,oBAAc,EAC5CO,EAAK,UAAO,OAACT,EAAA,CAAK,IAAKC,EAAK,KAAMC,EAAM,CAAE,EACtC,SAAS,KAAK,UAAU,SAAS,WAAW,GAC9C,SAAS,KAAK,UAAU,OAAO,WAAW,CAE9C,CACF,GAAG",
  "names": ["require_client", "__commonJSMin", "exports", "m", "i", "import_react", "import_client", "base", "cache", "siteLoader", "p", "id", "res", "load", "w", "comp", "type", "page", "x", "url", "text", "import_jsx_runtime", "w", "Root", "url", "Live", "_", "render", "Provider", "GlobalContext", "siteLoader", "div", "root", "defineWindow", "defineReact"]
}
